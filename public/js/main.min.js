"use strict";window.addEventListener("DOMContentLoaded",function(){function e(e){this.type=e}document.addEventListener("click",function(e){e.stopPropagation();var t=e.target;{var n,o,r,s;t.closest("[data-parent]")&&(n=t.dataset.parent?t.dataset.parent:null,o=document.querySelector('[data-submenu="'.concat(n,'"]')),document.querySelector(".catalog-header"),o?(r=document.querySelector("._sub-menu-active"),s=document.querySelector("._sub-menu-open"),r&&r!==t&&(r.classList.remove("_sub-menu-active"),s.classList.remove("_sub-menu-open"),document.documentElement.classList.remove("sub-menu-open")),document.documentElement.classList.toggle("sub-menu-open"),t.classList.toggle("_sub-menu-active"),o.classList.toggle("_sub-menu-open")):console.log("Ой Ой, нет такого подменю :("),e.preventDefault())}t.closest(".menu-top-header__link_catalog")&&(document.documentElement.classList.add("catalog-open"),e.preventDefault());t.classList.contains("icon-menu")&&(t.classList.toggle("active"),document.querySelector(".menu__body").classList.toggle("active"),document.documentElement.classList.remove("catalog-open"),document.documentElement.classList.remove("_sub-menu-open"),document.documentElement.classList.remove("sub-menu-open"),e.preventDefault());t.closest(".menu-catalog__back")&&(document.documentElement.classList.remove("catalog-open"),document.querySelector("._sub-menu-active")&&document.querySelector("._sub-menu-active").classList.remove("_sub-menu-active"),document.querySelector("._sub-menu-open")&&document.querySelector("._sub-menu-open").classList.remove("_sub-menu-open"),e.preventDefault());t.closest(".sub-menu-catalog__back")&&(document.documentElement.classList.remove("sub-menu-open"),document.querySelector("._sub-menu-active")&&document.querySelector("._sub-menu-active").classList.remove("_sub-menu-active"),document.querySelector("._sub-menu-open")&&document.querySelector("._sub-menu-open").classList.remove("_sub-menu-open"),e.preventDefault());t.closest(".icon-menu")&&(document.documentElement.classList.remove("sub-menu-open"),document.querySelector("._sub-menu-active")&&document.querySelector("._sub-menu-active").classList.remove("_sub-menu-active"),document.querySelector("._sub-menu-open")&&document.querySelector("._sub-menu-open").classList.remove("_sub-menu-open"),e.preventDefault());var i,a=document.getElementsByClassName("sub-menu-catalog__column");for(i=0;i<a.length;i++)a[i].addEventListener("click",function(e){this.classList.toggle("sub-menu-catalog__column__open"),e.stopImmediatePropagation();var t=this.querySelector(".sub-menu-catalog__list"),n=this.querySelector(".sub-menu-catalog__all");"block"===t.style.display?(t.style.display="none",n.style.display="none"):(t.style.display="block",n.style.display="block")})}),$(document).ready(function(){$(".menu__icon").click(function(e){$("body").toggleClass("lock")})}),$(document).on("click",".phones-header__arrow",function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).parent().find(".phones-header__list").first().slideToggle(300)}),$(document).on("click",".spoller-item-footer__title",function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).parent().find(".menu-footer__list").first().slideToggle(300)}),e.prototype.init=function(){var i=this,a=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e],n=t.dataset.da.trim().split(","),o={};o.element=t,o.parent=t.parentNode,o.destination=document.querySelector(n[0].trim()),o.breakpoint=n[1]?n[1].trim():"767",o.place=n[2]?n[2].trim():"last",o.index=this.indexInParent(o.parent,o.element),this.оbjects.push(o)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint},this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,function(e,t,n){return Array.prototype.indexOf.call(n,e)===t});for(var r=function(e){var t=i.mediaQueries[e],n=String.prototype.split.call(t,","),o=window.matchMedia(n[0]),r=n[1],s=Array.prototype.filter.call(i.оbjects,function(e){return e.breakpoint===r});o.addListener(function(){a.mediaHandler(o,s)}),i.mediaHandler(o,s)},s=0;s<this.mediaQueries.length;s++)r(s)},e.prototype.mediaHandler=function(e,t){if(e.matches)for(var n=0;n<t.length;n++){var o=t[n];o.index=this.indexInParent(o.parent,o.element),this.moveTo(o.place,o.element,o.destination)}else for(var r=0;r<t.length;r++){var s=t[r];s.element.classList.contains(this.daClassname)&&this.moveBack(s.parent,s.element,s.index)}},e.prototype.moveTo=function(e,t,n){t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.insertAdjacentElement("beforeend",t):"first"!==e?n.children[e].insertAdjacentElement("beforebegin",t):n.insertAdjacentElement("afterbegin",t)},e.prototype.moveBack=function(e,t,n){t.classList.remove(this.daClassname),void 0!==e.children[n]?e.children[n].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},e.prototype.indexInParent=function(e,t){var n=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(n,t)},e.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint}):Array.prototype.sort.call(e,function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint})},new e("max").init(),document.querySelector(".main-block__slider")&&new Swiper(".main-block__slider",{pagination:{el:".controll-main-block__dotts",clickable:!0},slidesPerView:1,loop:!0,observer:!0,observerParents:!0,spaceBetween:50,speed:800,on:{init:function(){var e=document.querySelector(".fraction-controll__all"),t=document.querySelectorAll(".slide-main-block:not(.swiper-slide-duplicate)");e.innerHTML=t.length<10?"0".concat(t.length):t.length},slideChange:function(e){document.querySelector(".fraction-controll__current").innerHTML=e.realIndex+1<10?"0".concat(e.realIndex+1):e.realIndex+1}}}),document.querySelector(".products-slider__container")&&new Swiper(".products-slider__slider",{pagination:{el:".products-slider__dotts",clickable:!0},observer:!0,observerParents:!0,speed:800,watchOverflow:!0,breakpoints:{321:{slidesPerView:1},481:{slidesPerView:2},769:{slidesPerView:3},960:{slidesPerView:4}}}),document.querySelector(".products-new__slider")&&new Swiper(".products-new__slider",{pagination:{el:".products-new__dotts",clickable:!0},observer:!0,observerParents:!0,speed:800,watchOverflow:!0,breakpoints:{321:{slidesPerView:1},482:{slidesPerView:1},769:{slidesPerView:2},961:{slidesPerView:3},1300:{slidesPerView:3}}}),document.querySelector(".actions-slider__container")&&new Swiper(".actions-slider__slider",{pagination:{el:".actions-slider__dotts",clickable:!0},observer:!0,observerParents:!0,speed:800,watchOverflow:!0,breakpoints:{321:{slidesPerView:1},481:{slidesPerView:2},769:{slidesPerView:3},960:{slidesPerView:4}}});var o=document.querySelectorAll(".rating");0<o.length&&function(){for(var n,s,e=0;e<o.length;e++){t(o[e])}function t(e){i(e),a(),e.classList.contains("rating_set")&&function(r){for(var e=r.querySelectorAll(".rating__item"),t=function(n){var o=e[n];o.addEventListener("mouseenter",function(e){i(r),a(o.value)}),o.addEventListener("mouseleave",function(e){a()}),o.addEventListener("click",function(e){var t;i(r),r.dataset.ajax?(o.value,(t=r).classList.contains("rating_sending")||(t.classList.add("rating_sending"),fetch("rating.json").then(function(e){return e.text()}).then(function(e){setTimeout(function(){s.innerHTML=JSON.parse(e).newRating,a(),t.classList.remove("rating_sending")},1e3)}).catch(function(){alert("Ошибка"),t.classList.remove("rating_sending")}))):(s.innerHTML=n+1,a())})},n=0;n<e.length;n++)t(n)}(e)}function i(e){n=e.querySelector(".rating__active"),s=e.querySelector(".rating__value")}function a(e){var t=(0<arguments.length&&void 0!==e?e:s.innerHTML)/.05;n.style.width="".concat(t,"%")}}()});var mainForm=document.forms.main,mainFormInput=mainForm.nameInput;function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}console.log(mainFormInput),mainForm.addEventListener("submit",function(e){emailTest(mainFormInput)&&(mainFormInput.parentElement.insertAdjacentHTML("beforeend",'<div class="main-form__error">\n\t\t\t\tВведите email\n\t\t\t</div>'),e.preventDefault())}),mainFormInput.addEventListener("focus",function(e){mainFormInput.nextElementSibling});